datasource db {
  provider = "postgresql"
  url = "postgresql://prod_manage_database_7ybf_user:PKRi8AMITcoTJw5gLPrhmP7VIAHA2zBk@dpg-crs6kfrtq21c73dcl4qg-a.oregon-postgres.render.com/prod_manage_database_7ybf"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int    @id @default(autoincrement())
  token    String @unique
  password String
  name     String
}

model CutRecord {
  id             Int          @id @default(autoincrement())
  code           String
  pieceAmount    Int
  line1          String
  line2          String
  limiteDate     DateTime
  comment        String?  
  supplier       String
  status         String       @default("in progress")
  selectedOperations Json? 
  image          Bytes?  
  createdAt      DateTime     @default(now())  
  updatedAt      DateTime     @default(now()) @updatedAt  
}

model OperationRecord {
  id             Int      @id @default(autoincrement())
  operationName  String   
  calculatedTime String  
  createdAt      DateTime @default(now())
}

model OperationSet {
  id              Int               @id @default(autoincrement())
  setName         String            // Nome do conjunto de operações
  createdAt       DateTime          @default(now())
  operationRecords Json     
}

model Employee {
  id           Int         @id @default(autoincrement())
  name         String
  roleId       Int
  entryDate    DateTime
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @default(now()) @updatedAt
  performances Performance[] 
  role         Role        @relation(fields: [roleId], references: [id])
}

model Role {
  id           Int         @id @default(autoincrement())
  title        String      @unique  
  description  String?     
  employees    Employee[]  
}

model Performance {
  id          Int       @id @default(autoincrement())
  employeeId  Int
  date        DateTime  
  schedules   Json      
  produced    Int
  meta        Int
  isCompleted Boolean   @default(false)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  employee    Employee  @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}
